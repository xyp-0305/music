{"version":3,"file":"index.js","sources":["../../src/escape-html.js","../../src/util.js","../../src/scope.js","../../src/commands.js","../../src/linked-buffer.js","../../src/index.js"],"sourcesContent":["/*!\n * escape-html\n * Copyright(c) 2012-2013 TJ Holowaychuk\n * Copyright(c) 2015 Andreas Lubbe\n * Copyright(c) 2015 Tiancheng \"Timothy\" Gu\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module variables.\n * @private\n */\n\nvar matchHtmlRegExp = /[\"'&<>]/;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {string} string The string to escape for inserting into HTML\n * @return {string}\n * @public\n */\n\nfunction escapeHtml(string) {\n  var str = '' + string;\n  var match = matchHtmlRegExp.exec(str);\n\n  if (!match) {\n    return str;\n  }\n\n  var escape;\n  var html = '';\n  var index = 0;\n  var lastIndex = 0;\n\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34: // \"\n        escape = '&quot;';\n        break;\n      case 38: // &\n        escape = '&amp;';\n        break;\n      case 39: // '\n        escape = '&#39;';\n        break;\n      case 60: // <\n        escape = '&lt;';\n        break;\n      case 62: // >\n        escape = '&gt;';\n        break;\n      default:\n        continue;\n    }\n\n    if (lastIndex !== index) {\n      html += str.substring(lastIndex, index);\n    }\n\n    lastIndex = index + 1;\n    html += escape;\n  }\n\n  return lastIndex !== index ? html + str.substring(lastIndex, index) : html;\n}\n\nexport default escapeHtml;\n","// http://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet\n// http://wonko.com/post/html-escaping\n\nimport escapeHtml from './escape-html';\n\nconst SUBSTITUTE_REG = /\\\\?\\{([^{}]+)\\}/g;\nconst win = typeof global !== 'undefined' ? global : self;\n\nconst toString = Object.prototype.toString;\nconst util = {\n  isArray:\n    Array.isArray ||\n    function isArray(obj) {\n      return toString.call(obj) === '[object Array]';\n    },\n\n  keys:\n    Object.keys ||\n    function keys(o) {\n      const result = [];\n      let p;\n\n      for (p in o) {\n        if (o.hasOwnProperty(p)) {\n          result.push(p);\n        }\n      }\n\n      return result;\n    },\n\n  each(object, fn, context = null) {\n    if (object) {\n      let key;\n      let val;\n      let keys;\n      let i = 0;\n      const length = object && object.length;\n      // do not use typeof obj == 'function': bug in phantomjs\n      const isObj =\n        length === undefined ||\n        Object.prototype.toString.call(object) === '[object Function]';\n\n      if (isObj) {\n        keys = util.keys(object);\n        for (; i < keys.length; i++) {\n          key = keys[i];\n          // can not use hasOwnProperty\n          if (fn.call(context, object[key], key, object) === false) {\n            break;\n          }\n        }\n      } else {\n        for (val = object[0]; i < length; val = object[++i]) {\n          if (fn.call(context, val, i, object) === false) {\n            break;\n          }\n        }\n      }\n    }\n    return object;\n  },\n\n  mix(t, s) {\n    if (s) {\n      for (const p in s) {\n        if (s.hasOwnProperty(p)) {\n          t[p] = s[p];\n        }\n      }\n    }\n    return t;\n  },\n\n  globalEval(data) {\n    if (win) {\n      if (win.execScript) {\n        win.execScript(data);\n      } else {\n        /* eslint wrap-iife:0 */\n        (function run(d) {\n          win.eval.call(win, d);\n        })(data);\n      }\n    }\n  },\n\n  substitute(str, o, regexp) {\n    if (typeof str !== 'string' || !o) {\n      return str;\n    }\n\n    return str.replace(regexp || SUBSTITUTE_REG, (match, name) => {\n      if (match.charAt(0) === '\\\\') {\n        return match.slice(1);\n      }\n      return o[name] === undefined ? '' : o[name];\n    });\n  },\n\n  escapeHtml,\n\n  normalizePath(str) {\n    return str.replace(/\\\\/g, '/');\n  },\n\n  splitPath(str) {\n    return util.normalizePath(str).split('/');\n  },\n\n  merge(...args) {\n    let i = 0;\n    const len = args.length;\n    const ret = {};\n    for (; i < len; i++) {\n      const arg = args[i];\n      if (arg) {\n        util.mix(ret, arg);\n      }\n    }\n    return ret;\n  },\n};\n\nexport default util;\n","/**\n * scope resolution for xtemplate like function in javascript but keep original data unmodified\n */\n\nfunction Scope(data, affix, parent) {\n  if (data !== undefined) {\n    this.data = data;\n  } else {\n    this.data = {};\n  }\n  if (parent) {\n    this.parent = parent;\n    this.root = parent.root;\n  } else {\n    this.parent = undefined;\n    this.root = this;\n  }\n  this.affix = affix || {};\n  this.ready = false;\n}\n\nScope.prototype = {\n  isScope: 1,\n\n  constructor: Scope,\n\n  setParent(parentScope) {\n    this.parent = parentScope;\n    this.root = parentScope.root;\n  },\n\n  // keep original data unmodified\n  set(name, value) {\n    this.affix[name] = value;\n  },\n\n  setData(data) {\n    this.data = data;\n  },\n\n  getData() {\n    return this.data;\n  },\n\n  mix(v) {\n    const affix = this.affix;\n    for (const name in v) {\n      if (v.hasOwnProperty(name)) {\n        affix[name] = v[name];\n      }\n    }\n  },\n\n  get(name) {\n    const data = this.data;\n    let v;\n    const affix = this.affix;\n\n    if (data !== null && data !== undefined) {\n      v = data[name];\n    }\n\n    if (v !== undefined) {\n      return v;\n    }\n\n    return affix[name];\n  },\n\n  resolveInternalOuter(parts) {\n    const part0 = parts[0];\n    let v;\n    const self = this;\n    let scope = self;\n    if (part0 === 'this') {\n      v = self.data;\n    } else if (part0 === 'root') {\n      scope = scope.root;\n      v = scope.data;\n    } else if (part0) {\n      /* eslint no-cond-assign:0 */\n      do {\n        v = scope.get(part0);\n      } while (v === undefined && (scope = scope.parent));\n    } else {\n      return [scope.data];\n    }\n    return [undefined, v];\n  },\n\n  resolveInternal(parts) {\n    const ret = this.resolveInternalOuter(parts);\n    if (ret.length === 1) {\n      return ret[0];\n    }\n    let i;\n    const len = parts.length;\n    let v = ret[1];\n    if (v === undefined) {\n      return undefined;\n    }\n    for (i = 1; i < len; i++) {\n      if (v === null || v === undefined) {\n        return v;\n      }\n      v = v[parts[i]];\n    }\n    return v;\n  },\n\n  resolveLooseInternal(parts) {\n    const ret = this.resolveInternalOuter(parts);\n    if (ret.length === 1) {\n      return ret[0];\n    }\n    let i;\n    const len = parts.length;\n    let v = ret[1];\n    for (i = 1; v !== null && v !== undefined && i < len; i++) {\n      v = v[parts[i]];\n    }\n    return v;\n  },\n\n  resolveUp(parts) {\n    return this.parent && this.parent.resolveInternal(parts);\n  },\n\n  resolveLooseUp(parts) {\n    return this.parent && this.parent.resolveLooseInternal(parts);\n  },\n\n  resolveOuter(parts, d) {\n    const self = this;\n    let scope = self;\n    let depth = d;\n    let v;\n    if (!depth && parts.length === 1) {\n      v = self.get(parts[0]);\n      if (v !== undefined) {\n        return [v];\n      }\n      depth = 1;\n    }\n    if (depth) {\n      while (scope && depth--) {\n        scope = scope.parent;\n      }\n    }\n    if (!scope) {\n      return [undefined];\n    }\n    return [undefined, scope];\n  },\n\n  resolveLoose(parts, depth) {\n    const ret = this.resolveOuter(parts, depth);\n    if (ret.length === 1) {\n      return ret[0];\n    }\n    return ret[1].resolveLooseInternal(parts);\n  },\n\n  resolve(parts, depth) {\n    const ret = this.resolveOuter(parts, depth);\n    if (ret.length === 1) {\n      return ret[0];\n    }\n    return ret[1].resolveInternal(parts);\n  },\n};\n\nexport default Scope;\n","/**\n * native commands for xtemplate.\n */\n\nimport Scope from './scope';\nimport util from './util';\n\nconst commands = {\n  // range(start, stop, [step])\n  range(scope, option) {\n    const params = option.params;\n    const start = params[0];\n    const end = params[1];\n    let step = params[2];\n    if (\n      typeof process !== 'undefined' &&\n      process.env.NODE_ENV !== 'production'\n    ) {\n      if (\n        typeof start !== 'number' ||\n        typeof end !== 'number' ||\n        (step && typeof step !== 'number')\n      ) {\n        throw new Error('start/end/step of range must be type number!');\n      }\n    }\n    if (!step) {\n      step = start > end ? -1 : 1;\n    } else if ((start > end && step > 0) || (start < end && step < 0)) {\n      step = -step;\n    }\n    const ret = [];\n    for (let i = start; start < end ? i < end : i > end; i += step) {\n      ret.push(i);\n    }\n    return ret;\n  },\n\n  void() {\n    return undefined;\n  },\n\n  foreach(scope, option, buffer_) {\n    let buffer = buffer_;\n    const params = option.params;\n    const param0 = params[0];\n    const xindexName = params[2] || 'xindex';\n    const valueName = params[1];\n    let xcount;\n    let opScope;\n    let affix;\n    let xindex;\n    if (param0) {\n      xcount = param0.length;\n      for (xindex = 0; xindex < xcount; xindex++) {\n        opScope = new Scope(\n          param0[xindex],\n          {\n            xcount,\n            xindex,\n          },\n          scope,\n        );\n        affix = opScope.affix;\n        if (xindexName !== 'xindex') {\n          affix[xindexName] = xindex;\n          affix.xindex = undefined;\n        }\n        if (valueName) {\n          affix[valueName] = param0[xindex];\n        }\n        buffer = option.fn(opScope, buffer);\n      }\n    }\n    return buffer;\n  },\n\n  forin(scope, option, buffer_) {\n    let buffer = buffer_;\n    const params = option.params;\n    const param0 = params[0];\n    const xindexName = params[2] || 'xindex';\n    const valueName = params[1];\n    let opScope;\n    let affix;\n    let name;\n    // if undefined, will emit warning by compiler\n    if (param0) {\n      for (name in param0) {\n        if (param0.hasOwnProperty(name)) {\n          opScope = new Scope(\n            param0[name],\n            {\n              xindex: name,\n            },\n            scope,\n          );\n          affix = opScope.affix;\n          if (xindexName !== 'xindex') {\n            affix[xindexName] = name;\n            affix.xindex = undefined;\n          }\n          if (valueName) {\n            affix[valueName] = param0[name];\n          }\n          buffer = option.fn(opScope, buffer);\n        }\n      }\n    }\n    return buffer;\n  },\n\n  each(scope, option, buffer) {\n    const params = option.params;\n    const param0 = params[0];\n    if (param0) {\n      if (util.isArray(param0)) {\n        return commands.foreach(scope, option, buffer);\n      }\n      return commands.forin(scope, option, buffer);\n    }\n    return buffer;\n  },\n\n  with(scope, option, buffer_) {\n    let buffer = buffer_;\n    const params = option.params;\n    const param0 = params[0];\n    if (param0) {\n      // skip object check for performance\n      const opScope = new Scope(param0, undefined, scope);\n      buffer = option.fn(opScope, buffer);\n    }\n    return buffer;\n  },\n\n  if(scope, option, buffer_) {\n    let buffer = buffer_;\n    const params = option.params;\n    const param0 = params[0];\n    if (param0) {\n      const fn = option.fn;\n      if (fn) {\n        buffer = fn(scope, buffer);\n      }\n    } else {\n      let matchElseIf = false;\n      const elseIfs = option.elseIfs;\n      const inverse = option.inverse;\n      if (elseIfs) {\n        for (let i = 0, len = elseIfs.length; i < len; i++) {\n          const elseIf = elseIfs[i];\n          matchElseIf = elseIf.test(scope);\n          if (matchElseIf) {\n            buffer = elseIf.fn(scope, buffer);\n            break;\n          }\n        }\n      }\n      if (!matchElseIf && inverse) {\n        buffer = inverse(scope, buffer);\n      }\n    }\n    return buffer;\n  },\n\n  set(scope_, option, buffer) {\n    let scope = scope_;\n    const hash = option.hash;\n    const len = hash.length;\n    for (let i = 0; i < len; i++) {\n      const h = hash[i];\n      const parts = h.key;\n      let depth = h.depth;\n      const value = h.value;\n      if (parts.length === 1) {\n        const root = scope.root;\n        while (depth && root !== scope) {\n          scope = scope.parent;\n          --depth;\n        }\n        scope.set(parts[0], value);\n      } else {\n        const last = scope.resolve(parts.slice(0, -1), depth);\n        if (last) {\n          last[parts[parts.length - 1]] = value;\n        }\n      }\n    }\n    return buffer;\n  },\n\n  include: 1,\n\n  includeOnce: 1,\n\n  parse: 1,\n\n  extend: 1,\n\n  block(scope, option, buffer_) {\n    let buffer = buffer_;\n    const self = this;\n    const runtime = self.runtime;\n    const params = option.params;\n    let blockName = params[0];\n    let type;\n    if (params.length === 2) {\n      type = params[0];\n      blockName = params[1];\n    }\n    const blocks = (runtime.blocks = runtime.blocks || {});\n    const head = blocks[blockName];\n    let cursor;\n    const current = {\n      fn: option.fn,\n      type,\n    };\n    if (!head) {\n      blocks[blockName] = current;\n    } else if (head.type) {\n      if (head.type === 'append') {\n        current.next = head;\n        blocks[blockName] = current;\n      } else if (head.type === 'prepend') {\n        let prev;\n        cursor = head;\n        while (cursor && cursor.type === 'prepend') {\n          prev = cursor;\n          cursor = cursor.next;\n        }\n        current.next = cursor;\n        prev.next = current;\n      }\n    }\n\n    if (!runtime.extendTpl) {\n      cursor = blocks[blockName];\n      while (cursor) {\n        if (cursor.fn) {\n          buffer = cursor.fn.call(self, scope, buffer);\n        }\n        cursor = cursor.next;\n      }\n    }\n\n    return buffer;\n  },\n\n  macro(scope, option, buffer_) {\n    let buffer = buffer_;\n    const hash = option.hash;\n    const params = option.params;\n    const macroName = params[0];\n    const params1 = params.slice(1);\n    const self = this;\n    const runtime = self.runtime;\n    const macros = (runtime.macros = runtime.macros || {});\n    const macro = macros[macroName];\n    // definition\n    if (option.fn) {\n      macros[macroName] = {\n        paramNames: params1,\n        hash,\n        fn: option.fn,\n      };\n    } else if (macro) {\n      const paramValues = macro.hash || {};\n      const paramNames = macro.paramNames;\n      if (paramNames) {\n        for (let i = 0, len = paramNames.length; i < len; i++) {\n          const p = paramNames[i];\n          paramValues[p] = params1[i];\n        }\n      }\n      if (hash) {\n        for (const h in hash) {\n          if (hash.hasOwnProperty(h)) {\n            paramValues[h] = hash[h];\n          }\n        }\n      }\n      const newScope = new Scope(paramValues);\n      // https://github.com/xtemplate/xtemplate/issues/29\n      newScope.root = scope.root;\n      // no caller Scope\n      buffer = macro.fn.call(self, newScope, buffer);\n    } else {\n      const error = `can not find macro: ${macroName}`;\n      buffer.error(error);\n    }\n    return buffer;\n  },\n};\n\ncommands.debugger = function debuggerFn() {\n  util.globalEval('debugger');\n};\n\nexport default commands;\n","/**\n * LinkedBuffer of generate content from xtemplate\n */\nimport util from './util';\n\nfunction Buffer(list, next, tpl) {\n  this.list = list;\n  this.init();\n  this.next = next;\n  this.ready = false;\n  // tpl belongs\n  this.tpl = tpl;\n}\n\nBuffer.prototype = {\n  constructor: Buffer,\n\n  isBuffer: 1,\n\n  init() {\n    this.data = '';\n  },\n\n  append(data) {\n    this.data += data;\n    return this;\n  },\n\n  write(data) {\n    // ignore null or undefined\n    if (data !== null && data !== undefined) {\n      if (data.isBuffer) {\n        return data;\n      }\n      this.data += data;\n    }\n    return this;\n  },\n\n  writeEscaped(data) {\n    // ignore null or undefined\n    if (data !== null && data !== undefined) {\n      if (data.isBuffer) {\n        return data;\n      }\n      this.data += util.escapeHtml(data);\n    }\n    return this;\n  },\n\n  insert() {\n    const self = this;\n    const list = self.list;\n    const tpl = self.tpl;\n    const nextFragment = new Buffer(list, self.next, tpl);\n    const asyncFragment = new Buffer(list, nextFragment, tpl);\n    self.next = asyncFragment;\n    self.ready = true;\n    return asyncFragment;\n  },\n\n  async(fn) {\n    const asyncFragment = this.insert();\n    const nextFragment = asyncFragment.next;\n    fn(asyncFragment);\n    return nextFragment;\n  },\n\n  error(e_) {\n    const callback = this.list.callback;\n    let e = e_;\n    if (callback) {\n      const tpl = this.tpl;\n      if (tpl) {\n        if (!(e instanceof Error)) {\n          e = new Error(e);\n        }\n        const name = tpl.name;\n        const line = tpl.pos.line;\n        const errorStr = `XTemplate error in file: ${name} at line ${line}: `;\n        try {\n          // phantomjs\n          e.stack = errorStr + e.stack;\n          e.message = errorStr + e.message;\n        } catch (e2) {\n          // empty\n        }\n        e.xtpl = {\n          pos: {\n            line,\n          },\n          name,\n        };\n      }\n      this.list.callback = null;\n      callback(e, undefined);\n    }\n  },\n\n  end() {\n    const self = this;\n    if (self.list.callback) {\n      self.ready = true;\n      self.list.flush();\n    }\n    return self;\n  },\n};\n\nfunction LinkedBuffer(callback, config) {\n  const self = this;\n  self.config = config;\n  self.head = new Buffer(self, undefined);\n  self.callback = callback;\n  this.init();\n}\n\nLinkedBuffer.prototype = {\n  constructor: LinkedBuffer,\n\n  init() {\n    this.data = '';\n  },\n\n  append(data) {\n    this.data += data;\n  },\n\n  end() {\n    this.callback(null, this.data);\n    this.callback = null;\n  },\n\n  flush() {\n    const self = this;\n    let fragment = self.head;\n    while (fragment) {\n      if (fragment.ready) {\n        this.data += fragment.data;\n      } else {\n        self.head = fragment;\n        return;\n      }\n      fragment = fragment.next;\n    }\n    self.end();\n  },\n};\n\nLinkedBuffer.Buffer = Buffer;\n\nexport default LinkedBuffer;\n\n/**\n * 2014-06-19 yiminghe@gmail.com\n * string concat is faster than array join: 85ms<-> 131ms\n */\n","/**\n * xtemplate runtime\n */\nimport util from './util';\nimport nativeCommands from './commands';\nimport Scope from './scope';\nimport LinkedBuffer from './linked-buffer';\n\nconst commands = {};\nconst { splitPath } = util;\n\n// for performance: reduce hidden class\nfunction TplWrap(name, runtime, root, scope, buffer, originalName, fn, parent) {\n  this.name = name;\n  this.originalName = originalName || name;\n  this.runtime = runtime;\n  this.root = root;\n  // line counter\n  this.pos = { line: 1 };\n  this.scope = scope;\n  this.buffer = buffer;\n  this.fn = fn;\n  this.parent = parent;\n}\n\nfunction findCommand(runtimeCommands, instanceCommands, parts) {\n  const name = parts[0];\n  let cmd =\n    (runtimeCommands && runtimeCommands[name]) ||\n    (instanceCommands && instanceCommands[name]) ||\n    commands[name];\n  if (parts.length === 1) {\n    return cmd;\n  }\n  if (cmd) {\n    const len = parts.length;\n    for (let i = 1; i < len; i++) {\n      cmd = cmd[parts[i]];\n      if (!cmd) {\n        return false;\n      }\n    }\n  }\n  return cmd;\n}\n\nfunction getSubNameFromParentName(parentName, subName) {\n  if (!parentName) {\n    throw new Error('parent template must have name!');\n  }\n  const parts = splitPath(parentName);\n  const subParts = splitPath(subName);\n  parts.pop();\n  for (let i = 0, l = subParts.length; i < l; i++) {\n    const subPart = subParts[i];\n    if (subPart === '.') {\n      continue;\n    } else if (subPart === '..') {\n      parts.pop();\n    } else {\n      parts.push(subPart);\n    }\n  }\n  return parts.join('/');\n}\n\n// depth: ../x.y() => 1\nfunction callFn(tpl, scope, option, buffer, parts, depth) {\n  let caller;\n  let fn;\n  let command1;\n  if (!depth) {\n    command1 = findCommand(\n      tpl.runtime.commands,\n      tpl.root.config.commands,\n      parts,\n    );\n  }\n  if (command1) {\n    return command1.call(tpl, scope, option, buffer);\n  } else if (command1 !== false) {\n    const callerParts = parts.slice(0, -1);\n    caller = scope.resolve(callerParts, depth);\n    if (caller === null || caller === undefined) {\n      buffer.error(\n        `Execute function \\`${parts.join('.')}\\` \\\nError: ${callerParts.join('.')} is undefined or null`,\n      );\n      return buffer;\n    }\n    fn = caller[parts[parts.length - 1]];\n    if (fn) {\n      // apply(x, undefined) error in ie8\n      try {\n        return fn.apply(caller, option.params || []);\n      } catch (err) {\n        buffer.error(\n          `Execute function \\`${parts.join('.')}\\` Error: ${err.message}`,\n        );\n        return buffer;\n      }\n    }\n  }\n  buffer.error(`Command Not Found: ${parts.join('.')}`);\n  return buffer;\n}\n\nconst utils = {\n  callFn,\n\n  // {{y().z()}}\n  callDataFn(params, parts) {\n    let caller = parts[0];\n    let fn = caller;\n    for (let i = 1; i < parts.length; i++) {\n      const name = parts[i];\n      if (fn && fn[name]) {\n        caller = fn;\n        fn = fn[name];\n      } else {\n        return '';\n      }\n    }\n    return fn.apply(caller, params || []);\n  },\n\n  callCommand(tpl, scope, option, buffer, parts) {\n    return callFn(tpl, scope, option, buffer, parts);\n  },\n};\n\n/**\n * template file name for chrome debug\n *\n * @cfg {Boolean} name\n * @member XTemplate.Runtime\n */\n\n/**\n * XTemplate runtime. only accept tpl as function.\n * @class XTemplate.Runtime\n */\nfunction XTemplateRuntime(fn, config) {\n  this.fn = fn;\n  this.config = util.merge(XTemplateRuntime.globalConfig, config);\n  this.subNameResolveCache = {};\n  this.loadedSubTplNames = {};\n}\n\nutil.mix(XTemplateRuntime, {\n  Scope,\n\n  LinkedBuffer,\n\n  globalConfig: {},\n\n  config(key, v) {\n    const { globalConfig } = this;\n    if (key !== undefined) {\n      if (v !== undefined) {\n        globalConfig[key] = v;\n      } else {\n        util.mix(globalConfig, key);\n      }\n    } else {\n      return globalConfig;\n    }\n  },\n\n  nativeCommands,\n\n  utils,\n\n  util,\n\n  /**\n   * add command to all template\n   * @method\n   * @static\n   * @param {String} commandName\n   * @param {Function} fn\n   * @member XTemplate.Runtime\n   */\n  addCommand(commandName, fn) {\n    commands[commandName] = fn;\n  },\n\n  /**\n   * remove command from all template by name\n   * @method\n   * @static\n   * @param {String} commandName\n   * @member XTemplate.Runtime\n   */\n  removeCommand(commandName) {\n    delete commands[commandName];\n  },\n});\n\nfunction resolve(root, subName_, parentName) {\n  let subName = subName_;\n  if (subName.charAt(0) !== '.') {\n    return subName;\n  }\n  const key = `${parentName}_ks_${subName}`;\n  const nameResolveCache = root.subNameResolveCache;\n  const cached = nameResolveCache[key];\n  if (cached) {\n    return cached;\n  }\n  subName = nameResolveCache[key] = getSubNameFromParentName(\n    parentName,\n    subName,\n  );\n  return subName;\n}\n\nfunction loadInternal(\n  root,\n  name,\n  runtime,\n  scope,\n  buffer,\n  originalName,\n  escape,\n  parentTpl,\n) {\n  const tpl = new TplWrap(\n    name,\n    runtime,\n    root,\n    scope,\n    buffer,\n    originalName,\n    undefined,\n    parentTpl,\n  );\n  buffer.tpl = tpl;\n  root.config.loader.load(tpl, (error, tplFn_) => {\n    let tplFn = tplFn_;\n    if (typeof tplFn === 'function') {\n      tpl.fn = tplFn;\n      // reduce count of object field for performance\n      /* eslint no-use-before-define:0 */\n      renderTpl(tpl);\n    } else if (error) {\n      buffer.error(error);\n    } else {\n      tplFn = tplFn || '';\n      if (escape) {\n        buffer.writeEscaped(tplFn);\n      } else {\n        buffer.data += tplFn;\n      }\n      buffer.end();\n    }\n  });\n}\n\nfunction includeInternal(root, scope, escape, buffer, tpl, originalName) {\n  const name = resolve(root, originalName, tpl.name);\n  const newBuffer = buffer.insert();\n  const next = newBuffer.next;\n  loadInternal(\n    root,\n    name,\n    tpl.runtime,\n    scope,\n    newBuffer,\n    originalName,\n    escape,\n    buffer.tpl,\n  );\n  return next;\n}\n\nfunction includeModuleInternal(root, scope, buffer, tpl, tplFn) {\n  const newBuffer = buffer.insert();\n  const next = newBuffer.next;\n  const newTpl = new TplWrap(\n    tplFn.TPL_NAME,\n    tpl.runtime,\n    root,\n    scope,\n    newBuffer,\n    undefined,\n    tplFn,\n    buffer.tpl,\n  );\n  newBuffer.tpl = newTpl;\n  renderTpl(newTpl);\n  return next;\n}\n\nfunction renderTpl(tpl) {\n  const buffer = tpl.fn();\n  // tpl.fn exception\n  if (buffer) {\n    const runtime = tpl.runtime;\n    const extendTpl = runtime.extendTpl;\n    let extendTplName;\n    if (extendTpl) {\n      extendTplName = extendTpl.params[0];\n      if (!extendTplName) {\n        return buffer.error('extend command required a non-empty parameter');\n      }\n    }\n    const extendTplFn = runtime.extendTplFn;\n    const extendTplBuffer = runtime.extendTplBuffer;\n    // if has extend statement, only parse\n    if (extendTplFn) {\n      runtime.extendTpl = null;\n      runtime.extendTplBuffer = null;\n      runtime.extendTplFn = null;\n      includeModuleInternal(\n        tpl.root,\n        tpl.scope,\n        extendTplBuffer,\n        tpl,\n        extendTplFn,\n      ).end();\n    } else if (extendTplName) {\n      runtime.extendTpl = null;\n      runtime.extendTplBuffer = null;\n      includeInternal(\n        tpl.root,\n        tpl.scope,\n        0,\n        extendTplBuffer,\n        tpl,\n        extendTplName,\n      ).end();\n    }\n    return buffer.end();\n  }\n}\n\nfunction getIncludeScope(scope, option, buffer) {\n  const params = option.params;\n  if (!params[0]) {\n    return buffer.error('include command required a non-empty parameter');\n  }\n  let newScope = scope;\n  let newScopeData = params[1];\n  const hash = option.hash;\n  if (hash) {\n    if (newScopeData) {\n      newScopeData = util.mix({}, newScopeData);\n    } else {\n      newScopeData = {};\n    }\n    util.mix(newScopeData, hash);\n  }\n  // sub template scope\n  if (newScopeData) {\n    newScope = new Scope(newScopeData, undefined, scope);\n  }\n  return newScope;\n}\n\nfunction checkIncludeOnce(root, option, tpl) {\n  const originalName = option.params[0];\n  const name = resolve(root, originalName, tpl.name);\n  const { loadedSubTplNames } = root;\n  if (loadedSubTplNames[name]) {\n    return false;\n  }\n  loadedSubTplNames[name] = true;\n  return true;\n}\n\nXTemplateRuntime.prototype = {\n  constructor: XTemplateRuntime,\n\n  Scope,\n\n  nativeCommands,\n\n  utils,\n\n  /**\n   * remove command by name\n   * @param commandName\n   */\n  removeCommand(commandName) {\n    const config = this.config;\n    if (config.commands) {\n      delete config.commands[commandName];\n    }\n  },\n\n  /**\n   * add command definition to current template\n   * @param commandName\n   * @param {Function} fn command definition\n   */\n  addCommand(commandName, fn) {\n    const config = this.config;\n    config.commands = config.commands || {};\n    config.commands[commandName] = fn;\n  },\n\n  include(scope, option, buffer, tpl) {\n    return includeInternal(\n      this,\n      getIncludeScope(scope, option, buffer),\n      option.escape,\n      buffer,\n      tpl,\n      option.params[0],\n    );\n  },\n\n  includeModule(scope, option, buffer, tpl) {\n    return includeModuleInternal(\n      this,\n      getIncludeScope(scope, option, buffer),\n      buffer,\n      tpl,\n      option.params[0],\n    );\n  },\n\n  includeOnce(scope, option, buffer, tpl) {\n    if (checkIncludeOnce(this, option, tpl)) {\n      return this.include(scope, option, buffer, tpl);\n    }\n    return buffer;\n  },\n\n  includeOnceModule(scope, option, buffer, tpl) {\n    if (checkIncludeOnce(this, option, tpl)) {\n      return this.includeModule(scope, option, buffer, tpl);\n    }\n    return buffer;\n  },\n\n  /**\n   * get result by merge data with template\n   */\n  render(data, option_, callback_) {\n    let option = option_;\n    let callback = callback_;\n    let html = '';\n    const fn = this.fn;\n    const config = this.config;\n    if (typeof option === 'function') {\n      callback = option;\n      option = null;\n    }\n    option = option || {};\n    if (!callback) {\n      callback = (error_, ret) => {\n        let error = error_;\n        if (error) {\n          if (!(error instanceof Error)) {\n            error = new Error(error);\n          }\n          throw error;\n        }\n        html = ret;\n      };\n    }\n    let name = this.config.name;\n    if (!name && fn && fn.TPL_NAME) {\n      name = fn.TPL_NAME;\n    }\n    let scope;\n    if (data instanceof Scope) {\n      scope = data;\n    } else {\n      scope = new Scope(data);\n    }\n    const buffer = new LinkedBuffer(callback, config).head;\n    const tpl = new TplWrap(\n      name,\n      {\n        commands: option.commands,\n      },\n      this,\n      scope,\n      buffer,\n      name,\n      fn,\n    );\n    buffer.tpl = tpl;\n    if (!fn) {\n      config.loader.load(tpl, (err, fn2) => {\n        if (fn2) {\n          tpl.fn = this.fn = fn2;\n          renderTpl(tpl);\n        } else if (err) {\n          buffer.error(err);\n        }\n      });\n      return html;\n    }\n    renderTpl(tpl);\n    return html;\n  },\n};\n\nexport default XTemplateRuntime;\n\n/**\n * @ignore\n *\n * 2012-09-12 yiminghe@gmail.com\n *  - 参考 velocity, 扩充 ast\n *  - Expression/ConditionalOrExpression\n *  - EqualityExpression/RelationalExpression...\n *\n * 2012-09-11 yiminghe@gmail.com\n *  - 初步完成，添加 tc\n *\n * 对比 template\n *\n *  优势\n *      - 不会莫名其妙报错（with）\n *      - 更多出错信息，直接给出行号\n *      - 更容易扩展 command, sub-tpl\n *      - 支持子模板\n *      - 支持作用域链: ..\\x ..\\..\\y\n *      - 内置 escapeHtml 支持\n *      - 支持预编译\n *      - 支持简单表达式 +-/%* ()\n *      - 支持简单比较 === !===\n *      - 支持类似函数的嵌套命令\n *   劣势\n *      - 不支持完整 js 语法\n */\n"],"names":["matchHtmlRegExp","escapeHtml","string","str","match","exec","escape","html","index","lastIndex","length","charCodeAt","substring","SUBSTITUTE_REG","win","global","self","toString","Object","prototype","util","isArray","Array","obj","call","keys","o","result","p","hasOwnProperty","push","each","object","fn","context","key","val","i","isObj","undefined","mix","t","s","globalEval","data","execScript","run","d","eval","substitute","regexp","replace","name","charAt","slice","normalizePath","splitPath","split","merge","len","ret","arg","Scope","affix","parent","root","ready","isScope","constructor","setParent","parentScope","set","value","setData","getData","v","get","resolveInternalOuter","parts","part0","scope","resolveInternal","resolveLooseInternal","resolveUp","resolveLooseUp","resolveOuter","depth","resolveLoose","resolve","commands","range","option","params","start","end","step","process","env","NODE_ENV","Error","foreach","buffer_","buffer","param0","xindexName","valueName","xcount","opScope","xindex","forin","matchElseIf","elseIfs","inverse","elseIf","test","scope_","hash","h","last","include","includeOnce","parse","extend","block","runtime","blockName","type","blocks","head","cursor","current","next","prev","extendTpl","macro","macroName","params1","macros","paramNames","paramValues","newScope","error","debuggerFn","Buffer","list","tpl","init","isBuffer","append","write","writeEscaped","insert","nextFragment","asyncFragment","async","e_","callback","e","line","pos","errorStr","stack","message","e2","xtpl","flush","LinkedBuffer","config","fragment","TplWrap","originalName","findCommand","runtimeCommands","instanceCommands","cmd","getSubNameFromParentName","parentName","subName","subParts","pop","l","subPart","join","callFn","caller","command1","callerParts","apply","err","utils","callDataFn","callCommand","XTemplateRuntime","globalConfig","subNameResolveCache","loadedSubTplNames","nativeCommands","addCommand","commandName","removeCommand","subName_","nameResolveCache","cached","loadInternal","parentTpl","loader","load","tplFn_","tplFn","renderTpl","includeInternal","newBuffer","includeModuleInternal","newTpl","TPL_NAME","extendTplName","extendTplFn","extendTplBuffer","getIncludeScope","newScopeData","checkIncludeOnce","includeModule","includeOnceModule","render","option_","callback_","error_","fn2"],"mappings":"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"}